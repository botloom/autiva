
### **JDK 8 (LTS) - 2014年3月：现代 Java 的开端**
JDK 8 是继 JDK 5 之后最重要的一个版本，它为后续所有更新奠定了基础。
1.  **Lambda 表达式 (JSR 335)**：这是最核心的特性。它允许我们将函数作为方法参数，使代码更简洁、更具表现力，是函数式编程风格的基石。
    ```java
    // 旧方式
    button.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            System.out.println("Button clicked");
        }
    });
    // Lambda 方式
    button.addActionListener(e -> System.out.println("Button clicked"));
    ```
2.  **Stream API**：提供了对集合进行高效、声明式处理的能力。支持链式调用，如 `filter`、`map`、`reduce` 等，可以轻松实现并行处理。
    ```java
    List<String> names = list.stream()
                             .filter(s -> s.startsWith("A"))
                             .sorted()
                             .collect(Collectors.toList());
    ```
3.  **接口的默认方法和静态方法**：允许在接口中添加带有实现的方法（`default` 关键字），解决了接口演进的兼容性问题。也可以添加静态方法。
    ```java
    interface MyInterface {
        default void newMethod() {
            System.out.println("Default implementation");
        }
        static void staticMethod() {
            System.out.println("Static utility method");
        }
    }
    ```
4.  **新的日期和时间 API (JSR 310)**：全新的 `java.time` 包，弥补了旧 `Date` 和 `Calendar` 类的所有缺陷。线程安全、API 设计清晰。
    ```java
    LocalDate date = LocalDate.now();
    LocalTime time = LocalTime.now();
    LocalDateTime dateTime = LocalDateTime.of(date, time);
    ```
5.  **Optional 类**：一个容器对象，可能包含或不包含非空值。它旨在优雅地解决 `NullPointerException` 问题，鼓励显式处理空值情况。
    ```java
    Optional<String> optional = Optional.of("Hello");
    optional.ifPresent(System.out::println);
    ```
6.  **其他**：重复注解、类型注解、新的 Nashorn JavaScript 引擎、CompletableFuture 等。
---
### **JDK 9 - 2017年9月：模块化的巨变**
这是一个里程碑式的版本，带来了内部结构的巨大变化。
1.  **模块系统 (Project Jigsaw, JSR 376)**：这是 JDK 9 的核心特性。它将 JDK 本身模块化，并允许开发者将自己的应用模块化。带来了更强的封装性、可靠的配置和可伸缩的安全性。引入了 `module-info.java` 文件。
    ```java
    // module-info.java
    module com.myapp {
        requires java.base; // 默认依赖
        requires java.logging;
        exports com.myapp.api; // 暴露包
    }
    ```
2.  **交互式 REPL 工具：JShell**：Java 的官方命令行 Shell，可以快速执行和测试 Java 代码片段，无需创建完整的类文件。
3.  **改进的 Javadoc**：支持在文档中搜索，并输出 HTML5 格式。
4.  **集合工厂方法**：提供了创建不可变集合的便捷方法。
    ```java
    List<String> list = List.of("a", "b", "c");
    Set<Integer> set = Set.of(1, 2, 3);
    Map<String, Integer> map = Map.of("A", 1, "B", 2);
    ```
5.  **私有接口方法**：接口中的 `default` 方法现在可以调用 `private` 方法来复用代码。
6.  **其他**：多版本兼容 JAR、改进的 Stream API（如 `takeWhile`/`dropWhile`）、HTTP/2 Client（孵化器）。
---
### **JDK 10 - 2018年3月：局部变量类型推断**
这是一个小而精的版本，专注于开发者体验。
1.  **局部变量类型推断 (JEP 286)**：引入了 `var` 关键字，让编译器根据初始化表达式自动推断局部变量的类型。减少了冗余代码，但 `var` 不能用于方法参数、返回值等。
    ```java
    // 旧方式
    Map<String, List<Integer>> map = new HashMap<String, List<Integer>>();
    // 新方式
    var map = new HashMap<String, List<Integer>>();
    var userList = List.of("user1", "user2");
    ```
2.  **其他**：应用类数据共享、基于时间的版本发布格式、G1 垃圾收集器的完整并行回收。
---
### **JDK 11 (LTS) - 2018年9月：生产就绪的 LTS 版本**
这是继 JDK 8 后第二个长期支持版本，被广泛采用。
1.  **HTTP Client (标准版)**：JDK 9 中孵化的 HTTP Client 在此版本中被正式标准化，支持 HTTP/2 和 WebSocket。
    ```java
    HttpClient client = HttpClient.newHttpClient();
    HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create("https://api.github.com"))
            .build();
    client.sendAsync(request, BodyHandlers.ofString())
          .thenApply(HttpResponse::body)
          .thenAccept(System.out::println)
          .join();
    ```
2.  **新的字符串方法**：`isBlank()`, `lines()`, `strip()`, `repeat()` 等，非常实用。
3.  **可选的 Lambda 参数类型推断**：`var` 可以用于 Lambda 表达式的参数，以便添加注解。
    ```java
    BiFunction<String, String, String> concat = (@Nonnull var s1, @Nonnull var s2) -> s1 + s2;
    ```
4.  **直接运行单文件源代码**：可以直接用 `java HelloWorld.java` 命令编译并运行单个 `.java` 文件，无需手动 `javac`。
5.  **移除特性**：移除了 Java EE 和 CORBA 模块。
6.  **其他**：Nest-Based 访问控制、动态类文件常量、Epsilon 垃圾收集器（无操作 GC）。
---
### **JDK 12 - 2019年3月：预览特性的时代**
这个版本引入了多个预览特性，鼓励开发者提前试用并提供反馈。
1.  **Switch 表达式 (预览)**：对 `switch` 语句进行了重大改进，可以使用 `->` 语法，支持返回值，并且不需要 `break`。
    ```java
    // 传统方式
    switch (day) {
        case "MON":
        case "TUE":
            System.out.println("Work");
            break;
        default:
            System.out.println("Rest");
    }
    // 新方式 (预览)
    switch (day) {
        case "MON", "TUE" -> System.out.println("Work");
        default -> System.out.println("Rest");
    }
    ```
2.  **Compact Numbers (预览)**：可以更紧凑地格式化数字，如 `1000` -> `1K`，`1000000` -> `1M`。
3.  **其他**：Shenandoah GC（实验性）、G1 的可中断 mixed GC、默认使用 CDS 类数据共享。
---
### **JDK 13 - 2019年9月：文本块和更多改进**
1.  **文本块 (预览)**：使用 `"""` 定义多行字符串，极大地简化了 JSON、SQL 等字符串的书写，无需转义引号和换行符。
    ```java
    String html = """
                  <html>
                      <body>
                          <p>Hello, world</p>
                      </body>
                  </html>
                  """;
    ```
2.  **Switch 表达式 (二次预览)**：引入了 `yield` 关键字用于从 `switch` 表达式中返回值。
    ```java
    int numLetters = switch (day) {
        case "MON", "TUE", "WED", "THU", "FRI" -> 5;
        case "SAT", "SUN" -> 2;
        default -> {
            System.out.println("Invalid day");
            yield 0;
        }
    };
    ```
3.  **其他**：动态 CDS 归档、ZGC 支持将未使用的堆内存返还给操作系统。
---
### **JDK 14 - 2020年3月：提升开发效率**
1.  **Switch 表达式 (标准版)**：经过两轮预览后正式转正。
2.  **Records (预览)**：一种新的、简洁的类类型，用于创建不可变的数据载体。自动生成构造器、`equals()`, `hashCode()`, `toString()` 和所有字段的 `getter` 方法。
    ```java
    public record Person(String name, int age) {}
    // 使用
    Person person = new Person("Alice", 30);
    System.out.println(person.name()); // 访问器方法
    System.out.println(person);
    ```
3.  **有用的 NullPointerExceptions**：通过 JVM 优化，NPE 的堆栈信息会明确指出哪个变量为 `null`，如 `Cannot invoke "String.length()" because "a.b.c" is null`。
4.  **其他**：模式匹配 for `instanceof` (预览)、外部内存 API (孵化器)、打包工具 (孵化器)。
---
### **JDK 15 - 2020年9月：巩固与清理**
1.  **文本块 (标准版)**：正式转正。
2.  **Records (二次预览)**：增加了密封类作为其超类型的支持。
3.  **密封类 (预览)**：允许控制哪些类或接口可以继承或实现它。提供了比 `final` 更细粒度的继承控制。
    ```java
    public sealed class Shape permits Circle, Square, Rectangle { ... }
    public final class Circle extends Shape { ... }
    public non-sealed class Rectangle extends Shape { ... } // 允许任何人继承
    ```
4.  **移除特性**：移除了 Nashorn JavaScript 引擎和 Solaris/SPARC 端口。
5.  **其他**：Eden 区的 ZGC、隐藏类、外部内存 API (二次孵化)、模式匹配 for `instanceof` (二次预览)。
---
### **JDK 16 - 2021年3月：开发者体验的飞跃**
这个版本将许多预览特性转正，并引入了新的 API。
1.  **Records (标准版)**：正式转正。
2.  **密封类 (二次预览)**：进一步优化。
3.  **模式匹配 for `instanceof` (标准版)**：正式转正。
    ```java
    if (obj instanceof String s) { // 直接转换为 s
        System.out.println(s.toUpperCase());
    }
    ```
4.  **Vector API (孵化器)**：提供在 CPU 上执行向量计算的 API，能利用 SIMD 指令，显著提升性能。
5.  **其他**：Unix Domain 套接字通道、外部内存 API (三次孵化)、`invokeDynamic` 常量、对 C++14 语言特性的支持。
---
### **JDK 17 (LTS) - 2021年9月：新的 LTS 巨头**
这是目前企业界正在大规模迁移的版本，功能强大且稳定。
1.  **密封类 (标准版)**：正式转正。
2.  **上下文相关的反序列化过滤器**：增强了序列化的安全性。
3.  **恢复始终严格的浮点语义**：确保浮点计算在所有平台上的可预测性。
4.  **新的 macOS 渲染管线**：使用 Apple Metal API，提升了 GUI 应用的性能。
5.  **移除特性**：移除了实验性的 AOT 和 JIT 编译器、安全管理器。
6.  **其他**：外部内存 API (孵化器)、Vector API (二次孵化)、模式匹配 for `switch` (预览)。
---
### **JDK 18 - 2022年3月：小步快跑**
1.  **UTF-8 作为默认字符集**：Java 的默认字符集从依赖系统环境改为始终是 UTF-8，解决了跨平台的一大痛点。
2.  **简单的 Web 服务器**：提供了一个极简的命令行 Web 服务器 (`jwebserver`)，用于原型开发、测试和教学。
3.  **Java API 文档代码片段**：Javadoc 支持 `@snippet` 标签，可以在文档中嵌入可验证的代码示例。
4.  **其他**：Vector API (三次孵化)、外部内存 API (二次孵化)、`finalize` 方法被标记为废弃。
---
### **JDK 19 - 2022年9月：并发的未来**
1.  **虚拟线程 (预览)**：**Project Loom** 的核心成果。引入了轻量级的虚拟线程，由 JVM 调度而非操作系统。可以在不改变现有 `Thread` API 的情况下，以极低的成本创建数百万个线程，极大提升了高并发应用的吞吐量。
    ```java
    try (var executor = Executors.newVirtualThreadPerTaskExecutor()) {
        IntStream.range(0, 10_000).forEach(i -> {
            executor.submit(() -> {
                Thread.sleep(Duration.ofSeconds(1));
                return i;
            });
        });
    } // 自动关闭
    ```
2.  **结构化并发 (预览)**：**Project Loom** 的另一部分。提供了一个新的 API，将并发运行的多个任务视为一个原子工作单元，可以统一管理、取消和观察它们的生命周期，简化了错误处理。
3.  **外部内存 API (三次预览)**：接近成熟。
4.  **其他**：Linux/RISC-V 端口、Vector API (四次孵化)。
---
### **JDK 20 - 2023年3月：继续演进**
这个版本主要是对预览特性的迭代和完善。
1.  **虚拟线程 (二次预览)**：根据社区反馈进行了少量 API 调整。
2.  **结构化并发 (二次预览)**：API 细化。
3.  **作用域值 (预览)**：一种在线程内和线程间共享不可变数据的新机制，比 `ThreadLocal` 更高效、更安全。
4.  **其他**：外部内存 API (第四次预览)、Vector API (五次孵化)、记录模式 (预览)。
---
### **JDK 21 (LTS) - 2023年9月：又一个革命性的 LTS**
这是继 JDK 8 和 17 之后又一个极其重要的 LTS 版本，正式将虚拟线程等革命性特性带入生产环境。
1.  **虚拟线程 (标准版)**：**正式转正！** 这是 JDK 21 最大的亮点，意味着高并发编程进入新时代。
2.  **结构化并发 (标准版)**：**正式转正！** 与虚拟线程配合使用，效果拔群。
3.  **有序集合 (Sequenced Collections)**：为集合框架增加了统一的“第一个”和“最后一个”元素访问接口，`List`, `Deque`, `LinkedHashSet` 等都实现了它。
    ```java
    List<String> list = new ArrayList<>(List.of("A", "B", "C"));
    String first = list.getFirst(); // "A"
    String last = list.getLast();   // "C"
    ```
4.  **记录模式 (标准版)**：**正式转正！** 允许在 `instanceof` 和 `switch` 中解构 `record` 对象。
    ```java
    if (obj instanceof Point(int x, int y)) {
        System.out.println("x = " + x + ", y = " + y);
    }
    ```
5.  **switch 的模式匹配 (预览)**：将模式匹配的能力扩展到 `switch` 语句/表达式中，可以对 `record`、类型等进行解构匹配。
    ```java
    static String format(Object obj) {
        return switch (obj) {
            case Integer i -> String.format("int %d", i);
            case Long l    -> String.format("long %d", l);
            case Double d  -> String.format("double %f", d);
            case String s  -> String.format("String %s", s);
            default        -> obj.toString();
        };
    }
    ```
6.  **其他**：未命名模式和变量 (预览)、外部内存 API (标准版，改名为 Foreign Function & Memory API)、字符串模板 (预览，第一轮)。
---
### **JDK 22 - 2024年3月：最后的准备**
1.  **未命名模式和变量 (标准版)**：**正式转正！** 允许使用下划线 `_` 来忽略不使用的变量或模式组件。
    ```java
    if (point instanceof Point(int x, _)) { // 忽略 y
        System.out.println(x);
    }
    try { ... } catch (Exception _) { } // 忽略异常对象
    ```
2.  **switch 的模式匹配 (二次预览)**：进一步完善。
3.  **语句前预览**：允许在 `if` 和 `switch` 语句前使用 `when` 关键字进行复杂的布尔判断，使代码更流畅。
    ```java
    String formatted = switch (getDay()) {
        case null -> "Unknown";
        case Day d when d.isWeekend() -> "Weekend:" + d;
        case Day d -> "Weekday:" + d;
    };
    ```
4.  **其他**：G1 收集器的新功能、类文件 API (预览)、流收集器 (预览)。
---
### **JDK 23 (LTS) - 2024年9月：下一个长期支持版本**
1.  **模式匹配 for `switch` (标准版)**：**正式转正！** 现代化的 `switch` 语法尘埃落定。
2.  **语句前预览 (二次预览)**：继续迭代。
3.  **隐式类和实例主方法 (预览)**：**Project Amber** 的一部分，旨在简化小型程序的编写，让 Java 更像脚本语言，无需 `public static void main`。
    ```java
    // 不需要 public class, public static void main
    void main() {
        System.out.println("Hello, world!");
    }
    ```
4.  **灵活的构造函数主体 (预览)**：允许在构造函数体中，在显式调用 `this(...)` 或 `super(...)` 之前执行不访问实例变量的代码。
5.  **其他**：结构化并发 (更新)、向量 API (第八次孵化)、类文件 API (二次预览)。
---
### **JDK 24 - 2025年3月：持续创新**
1.  **语句前预览 (三次预览)**：进一步优化。
2.  **类文件 API (三次预览)**：功能增强，更接近标准版。
3.  **流收集器 (二次预览)**：改进了 `Stream.gather()` 中间操作，提供了更强大的自定义收集能力。
4.  **其他**：作用域值 (二次预览)、隐式类和实例主方法 (二次预览)。
---
### **JDK 25 - 2025年9月：展望未来 (尚未发布)**
**注意：JDK 25 尚未发布，以下特性是基于当前 JEP (JDK Enhancement Proposal) 的计划，可能会有变动。**
1.  **语句前预览 (标准版)**：预计将在 JDK 25 转正。
2.  **类文件 API (标准版)**：预计将在 JDK 25 转正，为字节码操作提供标准、强大的 API。
3.  **隐式类和实例主方法 (标准版)**：预计将在 JDK 25 转正，进一步简化 Java 入门和脚本编写。
4.  **向量 API (标准版)**：经过多次孵化，预计将在 JDK 25 转正，为高性能计算提供原生支持。
5.  **其他**：可能会有新的预览特性，如原始类型特化等，以进一步提升性能。
---
